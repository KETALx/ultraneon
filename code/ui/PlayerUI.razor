@using System
@using Sandbox
@using Sandbox.UI
@inherits PanelComponent
@attribute [StyleSheet]
@namespace Ultraneon.UI

<root>
	<VitalsPanel Player="@player"/>
	<InventoryPanel Inventory="@inventory"/>
	<CrosshairPanel/>
	<AmmoPanel/>
	<RadarPanel/>
</root>

@code
{
	[Property]
	Entity player { get; set; }

	[Property]
	PlayerInventory inventory { get; set; }

	protected override void OnEnabled()
	{
		base.OnEnabled();
		player = Scene.GetAllComponents<Entity>().FirstOrDefault( x => x.GameObject.Tags.Has( "player" ) );
		inventory = player?.GameObject.Components.Get<PlayerInventory>();
		Log.Info( $"PlayerUI OnEnabled: player = {player}, inventory = {inventory}" );
	}

	protected override int BuildHash()
	{
		return player.IsValid() ? System.HashCode.Combine( player.health, inventory?.SelectedSlot ) : 0;
	}
}
