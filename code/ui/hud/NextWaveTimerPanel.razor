@using Sandbox.UI
@inherits Panel
@namespace Ultraneon.UI
@attribute [StyleSheet]

<root>
	<div class="next-wave-timer">
		<div class="wave-label">WAVE @CurrentWave</div>
		@* <div class="enemy-count">Enemies: @CurrentEnemiesAlive / @TotalEnemies</div> *@
		<div class="timer">Next: @FormatTime( TimeUntilNextWave )</div>
	</div>
</root>

@code
{
	[Property]
	public int CurrentWave { get; set; }

	[Property]
	public int CurrentEnemiesAlive { get; set; }

	[Property]
	public int TotalEnemies { get; set; }

	[Property]
	public float TimeUntilNextWave { get; set; }

	private string FormatTime( float time )
	{
		int minutes = (int)time / 60;
		int seconds = (int)time % 60;
		return $"{minutes:D2}:{seconds:D2}";
	}

	public void UpdatePanelData( int wave, int enemiesAlive, int totalEnemies, float timeUntilNext )
	{
		CurrentWave = wave;
		CurrentEnemiesAlive = enemiesAlive;
		TotalEnemies = totalEnemies;
		TimeUntilNextWave = timeUntilNext;
		StateHasChanged();
	}
}
